<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12 Dias de Sabedoria em Eclesiastes (Devocional)</title>
<style>
        /* 0. Vari√°vel CSS para controle de Zoom/Fonte (Acessibilidade) */
        :root {
            --base-font-scale: 1.0; /* Valor padr√£o para 100% */
        }
        
        /* 1. CSS PRINCIPAL (LIGHT THEME - PADR√ÉO) */
        body {
            font-family: 'Georgia', serif;
            margin: 0; 
            background-color: #e6e0d3; 
            color: #333; 
            line-height: 1.6;
            display: flex; 
            flex-direction: column; 
            /* CORRE√á√ÉO LAYOUT DESKTOP: Inicia o conte√∫do do topo, permitindo scroll limpo */
            justify-content: flex-start; 
            align-items: center;    
            min-height: 100vh; 
            padding: 0; /* Remove padding do body para usar margem no container */
            transition: background-color 0.3s, color 0.3s;
        }
        .book-container {
            /* Uso da vari√°vel CSS para aplicar o zoom no corpo do devocional */
            font-size: calc(16px * var(--base-font-scale)); 
            max-width: 650px; 
            width: 90%; 
            background: #fdfdfd; 
            padding: 30px 40px;
            border-radius: 8px; 
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2); 
            border: 1px solid #ccc;
            position: relative;
            /* CORRE√á√ÉO LAYOUT DESKTOP: Adiciona margem superior e inferior para espa√ßamento desktop */
            margin-top: 30px;
            margin-bottom: 30px;
            transition: background 0.3s, box-shadow 0.3s, font-size 0.3s;
        }

        h1 { color: #4b0082; text-align: center; font-family: 'Times New Roman', serif; border-bottom: 2px solid #4b0082; padding-bottom: 10px; margin-bottom: 10px; }
        .subtitle { text-align: center; font-style: italic; margin-bottom: 20px; color: #555; font-size: 0.95em; }
        h2 { color: #007bff; font-size: 1.5em; text-align: center; margin-top: 10px; margin-bottom: 20px; }
        .versiculos { font-style: italic; background-color: #f0f8ff; padding: 15px; border-left: 5px solid #28a745; margin: 15px 0; font-weight: 500; }
        .section { margin-top: 20px; padding: 10px; border-bottom: 1px dashed #ddd; }
        .section strong { display: block; color: #dc3545; margin-bottom: 5px; font-weight: bold; }
        .oracao-final { margin-top: 25px; padding: 15px; background-color: #fffae0; border-left: 5px solid #ffc107; font-weight: bold; text-align: center; font-style: italic; }
        
        /* 2. NAVEGA√á√ÉO */
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
            flex-wrap: wrap; 
            gap: 15px; 
        }
        
        /* ESTILO PADR√ÉO DOS BOT√ïES DE NAVEGA√á√ÉO (Anterior/Pr√≥ximo) */
        .nav-button {
            padding: 10px 15px;
            cursor: pointer;
            border: 1px solid #007bff;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
            transition: opacity 0.2s, background 0.2s, border-color 0.2s;
            font-size: 1em; 
        }
        .nav-button:disabled {
            opacity: 0.5;
            cursor: default;
        }

        /* 3. DARK THEME CSS */
        .dark-theme { background-color: #121212; color: #f4f4f4; }
        .dark-theme .book-container { background: #1e1e1e; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5); border-color: #333; }
        .dark-theme h1 { color: #bb86fc; border-bottom-color: #bb86fc; }
        .dark-theme .subtitle { color: #aaa; }
        .dark-theme h2 { color: #03dac6; }
        .dark-theme .versiculos { background-color: #2c2c2c; border-left-color: #03dac6; }
        .dark-theme .section { border-bottom-color: #444; }
        .dark-theme .section strong { color: #cf6679; }
        .dark-theme .oracao-final { background-color: #33331c; border-left-color: #ffd600; }
        .dark-theme .nav-button { background-color: #03dac6; border-color: #03dac6; color: #1e1e1e; }
        
        /* 4. SELETOR DE IDIOMA E TEMA (REMOVIDO DO HTML/JS) */
        .lang-flag-dropdown, .lang-flag-active {
            width: 24px;
            height: 18px;
            vertical-align: middle;
            margin-right: 5px;
            border: 1px solid #ccc;
        }
        
        /* AJUSTE 3: Esconde o bot√£o de Tema (Mantendo A+/A-) */
        #themeToggleFloater { 
            display: none !important; 
        }

        /* 5. CONTROLES DE ACESSIBILIDADE (Fonte e TTS) */
        
        /* Floater para A+ e A- */
        #accessibilityFloater {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px; /* Aumentei o gap para melhor separa√ß√£o */
        }
        .font-control-btn, #themeToggleFloater {
            background-color: #fff;
            color: #4b0082;
            border: 1px solid #4b0082;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 5px;
            line-height: 1;
            transition: background-color 0.2s, color 0.2s;
        }
        .font-control-btn:hover, #themeToggleFloater:hover {
            background-color: #4b0082;
            color: #fff;
        }
        .dark-theme .font-control-btn, .dark-theme #themeToggleFloater {
            background-color: #1e1e1e;
            color: #bb86fc;
            border-color: #bb86fc;
        }
        .dark-theme .font-control-btn:hover, .dark-theme #themeToggleFloater:hover {
            background-color: #bb86fc;
            color: #1e1e1e;
        }
        
        /* Controles de Leitura (Text-to-Speech) */
        .tts-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 8px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .dark-theme .tts-controls {
            background-color: #2c2c2c;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
        }

        #listenToggle {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        #listenToggle:hover {
            background-color: #1e7e34;
        }
        .dark-theme #listenToggle {
            background-color: #03dac6;
            color: #1e1e1e;
        }
        .dark-theme #listenToggle:hover {
            background-color: #01a89c;
        }

        #audioProgressBar {
            flex-grow: 1;
            height: 8px;
            background-color: #ddd;
            border-radius: 4px;
            overflow: hidden;
        }

        #audioProgressFill {
            height: 100%;
            width: 0%;
            background-color: #28a745;
            transition: width 0.1s linear;
        }
        .dark-theme #audioProgressBar {
             background-color: #444;
        }
        .dark-theme #audioProgressFill {
            background-color: #03dac6;
        }
        
        /* 6. REPOSICIONAMENTO VLIBRAS */
        body > .vw-plugin-wrapper {
            /* Reposiciona o VLibras */
            position: fixed !important;
            right: 0 !important;
            /* Posi√ß√£o no Desktop */
            top: 60% !important; 
            z-index: 99999999 !important;
        }
        
        /* 7. MEDIA QUERIES (Ajustes para Celular) */
        @media (max-width: 600px) {
            .book-container {
                padding: 20px 25px; 
                width: 100%; /* Ocupa 100% da largura em mobile */
                /* Override desktop margin to stick to the top on mobile */
                margin-top: 0;
                margin-bottom: 20px; 
            }

            .navigation {
                flex-direction: column; 
                gap: 10px; 
            }
            .nav-button {
                width: 100%; 
            }
             
            .progress-check { 
                order: -1; 
                width: 100%; 
            }
            
            #accessibilityFloater {
                 /* Posicionamento mais baixo para evitar a barra de endere√ßo */
                top: auto;
                bottom: 20px; 
                right: 20px;
            }
            
            body > .vw-plugin-wrapper {
                 /* Posi√ß√£o no Mobile */
                top: 72% !important;
            }
        }
        
        /* 8. FOOTER - Posiciona o footer abaixo do book-container, centralizado */
        footer {
            text-align: center;
            padding: 10px 0;
            width: 100%;
            max-width: 650px; /* Alinhado com o book-container */
            font-size: 0.8em;
            color: #777;
        }
        .dark-theme footer {
            color: #888;
        }

        /* 9. ESTILOS DA BARRA DE PROGRESSO E CHECKBOX (mantidos) */
        .progress-bar-wrapper { background-color: #ddd; border-radius: 10px; height: 10px; overflow: hidden; box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2); }
        .progress-bar { height: 100%; width: 0%; background-color: #28a745; border-radius: 10px; transition: width 0.5s ease-in-out; }
        .dark-theme #progressLabel { color: #03dac6; }
        .dark-theme .progress-bar-wrapper { background-color: #333; }
        .dark-theme .progress-bar { background-color: #03dac6; }
        .progress-check { display: flex; align-items: center; justify-content: center; margin: 0; flex-grow: 0; flex-shrink: 0; padding: 5px 10px; background-color: #e6f7ff; border: 1px solid #b3e0ff; border-radius: 5px; transition: background-color 0.3s; order: 0; }
        .progress-check label { margin-left: 10px; font-weight: bold; color: #1e8449; cursor: pointer; }
        .progress-check input[type="checkbox"] { transform: scale(1.3); cursor: pointer; }
        .dark-theme .progress-check { background-color: #2c2c2c; border-color: #444; }
        .dark-theme .progress-check label { color: #03dac6; }

        /* Anima√ß√µes (Mantidas) */
        .page-out-left { transform: translateX(-100%); opacity: 0; transition: transform 0.3s ease-in, opacity 0.3s ease-in; position: absolute; width: 100%; }
        .page-out-right { transform: translateX(100%); opacity: 0; transition: transform 0.3s ease-in, opacity 0.3s ease-in; position: absolute; width: 100%; }
        .page-in-right { animation: fadeInRight 0.4s ease-out forwards; }
        .page-in-left { animation: fadeInLeft 0.4s ease-out forwards; }
        
        @keyframes fadeInRight { 0% { transform: translateX(50px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }
        @keyframes fadeInLeft { 0% { transform: translateX(-50px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }
</style>
</head>
<body class="light-theme">

    <div id="accessibilityFloater">
        <button id="fontSizeDecrease" class="font-control-btn" aria-label="Diminuir o tamanho da fonte">A-</button>
        <button id="fontSizeIncrease" class="font-control-btn" aria-label="Aumentar o tamanho da fonte">A+</button>
        <button id="themeToggleFloater" class="font-control-btn" title="Mudar Tema"></button>
    </div>

    <div class="book-container">
        <h1 id="mainTitle">12 Dias de Sabedoria em Eclesiastes (Devocional)</h1>
		<p class="subtitle" id="subTitle">Encontrando prop√≥sito e significado em meio √† vaidade.</p>
        
        <div class="tts-controls">
            <button id="listenToggle" data-state="stop">Ou√ßa Aqui</button>
            <div id="audioProgressBar"><div id="audioProgressFill"></div></div>
        </div>
        
        <div id="progressContainer" style="margin-bottom: 15px;">
            <p id="progressLabel" style="text-align: center; font-size: 0.9em; margin-bottom: 5px; color: #4b0082; font-weight: bold;"></p>
            <div class="progress-bar-wrapper">
                <div id="progressBar" class="progress-bar"></div>
            </div>
        </div>
        <p id="pageCounter" style="text-align: right;"></p>
        
        <div id="devotionalContent">
            </div>

        <div class="navigation">
            <button id="prevButton" class="nav-button" disabled>‚Üê Anterior</button>
            
            <div class="progress-check">
                <input type="checkbox" id="completedCheck">
                <label for="completedCheck" id="checkLabel">Marcar como Conclu√≠do</label>
            </div>
            
            <button id="nextButton" class="nav-button">Pr√≥ximo ‚Üí</button>
        </div>
    </div>

    <footer>
        <p>Devocional adaptado e criado por Alex Silva | <span id="footerText"></span></p>
    </footer>

    <script>
        // --- DADOS MULTI-IDIOMA E TEMA ---
        const themeMap = {
            'light': { icon: 'üåô', next: 'dark' }, 
            'dark': { icon: '‚òÄÔ∏è', next: 'light' } 
        };

        const SAVED_THEME = localStorage.getItem('theme') || 'light'; 
        
        // --- VARI√ÅVEIS DE ESTADO ---
        const totalDays = 12;
        let currentDay = 1;
        const currentLang = 'pt-BR'; // Assume o portugu√™s como idioma base e √∫nico

        const DEVOTIONAL_KEY = 'sabedoria_eclesiastes'; 

        // NOVO: VARI√ÅVEIS DE ACESSIBILIDADE E TTS
        let fontScale = parseFloat(localStorage.getItem('fontScale')) || 1.0;
        const FONT_MIN = 0.8;
        const FONT_MAX = 1.4;
        let speech = null; // Inst√¢ncia SpeechSynthesis
        let isListening = false;
        let ttsContent = '';
        let ttsUtterance = null;
        let ttsCurrentCharacter = 0;
        
        // --- DADOS MULTI-IDIOMA (Tradu√ß√µes - Simplificado para PT-BR) ---
        const translations = {
            'pt-BR': {
                mainTitle: "12 Dias de Sabedoria em Eclesiastes (Devocional)",
				subTitle: "Encontrando prop√≥sito e significado em meio √† vaidade.",
                dayTitle: "Dia",
                progressLabelPrefix: "Progresso: ",
                checkLabel: "Marcar como Conclu√≠do",
                navPrev: "‚Üê Anterior",
                navNext: "Pr√≥ximo ‚Üí",
                footerText: "Direitos Reservados 2024",
                themeLight: "üåô Modo Escuro", 
                themeDark: "‚òÄÔ∏è Modo Claro",
                ttsListen: "Ou√ßa Aqui",
                ttsPause: "Pausar",
                ttsContinue: "Continuar",
                ttsStop: "Parar",
                keyVerse: "Vers√≠culo Chave",
                summary: "Resumo/Medita√ß√£o",
                application: "Aplica√ß√£o Pr√°tica",
                prayer: "Ora√ß√£o"
            }
        };
        
        // --- DADOS DO DEVOCIONAL (Eclesiastes - Simplificado para PT) ---
        const devotionalContent = {
            1: { pt: { h2: "Tudo √â Vaidade: A Perspectiva Sob o Sol", versiculos: "<strong>Eclesiastes 1:2-3 (NAA):</strong> 'Vaidade de vaidades', diz o Pregador; 'vaidade de vaidades! Tudo √© vaidade.' Que proveito tem o ser humano de todo o seu trabalho, com que se afadiga debaixo do sol?", resumo: "O termo 'vaidade' (hebel) significa 'vapor' ou 'neblina'. √â a ideia de algo que n√£o podemos agarrar. O autor, Salom√£o, est√° examinando a vida sob a perspectiva puramente humana, 'debaixo do sol'. Tudo o que fazemos, quando desconectado de Deus, n√£o tem significado eterno, √© como correr atr√°s do vento. A busca por prop√≥sito nas obras, na riqueza ou no prazer terreno √©, em √∫ltima an√°lise, f√∫til.", aplicacao: "O que tem consumido a maior parte do seu tempo e energia esta semana? Se este esfor√ßo fosse apagado amanh√£, que significado eterno ele teria? Gaste tempo hoje reavaliando suas prioridades √† luz da eternidade, n√£o apenas 'do sol'.", oracao: "Deus eterno, reconhe√ßo que muitas das minhas buscas s√£o apenas vaidade. Perdoa-me por focar no que √© passageiro. Ajuda-me a buscar o que tem verdadeiro peso e valor no Teu reino. Am√©m." } },
            2: { pt: { h2: "A Busca por Prazer: A Armadilha do Contentamento Tempor√°rio", versiculos: "<strong>Eclesiastes 2:10-11 (NAA):</strong> Nada do que os meus olhos desejaram lhes neguei, nem proibi o meu cora√ß√£o de se alegrar por causa de todo o meu trabalho. [...] Ent√£o, olhei para todas as obras que as minhas m√£os tinham feito [...] e eis que tudo era vaidade e correr atr√°s do vento.", resumo: "Salom√£o tentou todos os prazeres: vinho, constru√ß√£o, m√∫sica, riqueza e at√© multiplicidade de relacionamentos. Ele concluiu que o prazer, quando buscado como fonte de satisfa√ß√£o √∫ltima, √© uma estrada sem fim. A alegria passageira nunca satisfaz a sede da alma por significado eterno. A sabedoria est√° em aproveitar os dons de Deus, n√£o em ador√°-los.", aplicacao: "Onde voc√™ tem buscado atalhos para a felicidade? Em vez de preencher o vazio com prazeres fugazes, pe√ßa a Deus a gra√ßa de desfrutar das pequenas alegrias (comida, trabalho, descanso) como presentes d'Ele, reconhecendo-O como a verdadeira fonte.", oracao: "Senhor, liberta-me da escravid√£o de buscar satisfa√ß√£o onde ela n√£o pode ser encontrada. Ensina-me a desfrutar os Teus presentes com gratid√£o, mas a encontrar a minha alegria e descanso somente em Ti. Am√©m." } },
            3: { pt: { h2: "O Tempo e a Soberania: H√° Tempo Para Tudo", versiculos: "<strong>Eclesiastes 3:1 (NAA):</strong> Para tudo h√° um momento certo; h√° tempo para todo prop√≥sito debaixo do c√©u.", resumo: "Este cap√≠tulo √© um lembrete da Soberania de Deus sobre o tempo. Salom√£o argumenta que, embora a vida possa parecer ca√≥tica, h√° um Mestre de Cerim√¥nias por tr√°s de cada evento. Saber que h√° um 'tempo para todo prop√≥sito' nos liberta da ansiedade de tentar for√ßar as coisas. A verdadeira sabedoria √© aceitar o cronograma de Deus e viver com confian√ßa o tempo presente.", aplicacao: "Que √°rea da sua vida voc√™ est√° tentando acelerar ou impedir (tempo de plantar ou arrancar)? Confie que Deus colocou a eternidade em seu cora√ß√£o (Ec 3:11), mas que Ele tamb√©m governa seu presente. Entregue o controle de seu tempo a Ele.", oracao: "Pai, Tu √©s o Senhor do tempo. Perdoa-me por minha impaci√™ncia e por lutar contra o Teu tempo perfeito. Ajuda-me a abra√ßar o 'tempo para' que o Senhor me deu hoje e a descansar na Tua soberania. Am√©m." } },
            4: { pt: { h2: "O Valor do Companheirismo: Contra a Solid√£o da Vaidade", versiculos: "<strong>Eclesiastes 4:9-10 (NAA):</strong> Melhor √© serem dois do que um, porque t√™m melhor paga do seu trabalho. Pois se ca√≠rem, um levantar√° o seu companheiro; mas ai do que estiver s√≥, pois, caindo, n√£o haver√° quem o levante.", resumo: "Em um mundo de vaidade, onde a riqueza e a fama s√£o tempor√°rias, o companheirismo fiel (um amigo, um c√¥njuge) tem valor duradouro. A solid√£o √© uma das consequ√™ncias mais amargas da busca ego√≠sta. A sabedoria de Deus nos leva a investir em relacionamentos de alian√ßa, que s√£o bens preciosos 'acima do sol', mesmo que imperfeitos.", aplicacao: "Voc√™ tem se isolado em sua busca por sucesso ou por medo da rejei√ß√£o? Identifique um relacionamento que precisa de mais investimento (tempo, vulnerabilidade, perd√£o) e tome uma atitude pr√°tica para fortalec√™-lo hoje.", oracao: "Deus de Alian√ßa, obrigado pelo dom do companheirismo. Perdoa-me por me isolar. Ajuda-me a ser um amigo fiel e a aceitar a ajuda dos outros, para que eu possa caminhar com mais for√ßa e seguran√ßa. Am√©m." } },
            5: { pt: { h2: "Adora√ß√£o e Palavra: A Corre√ß√£o da Imprud√™ncia", versiculos: "<strong>Eclesiastes 5:1-2 (NAA):</strong> Guarde o p√© quando voc√™ for √† Casa de Deus. Chegue-se mais para ouvir do que para oferecer o sacrif√≠cio de tolos, porque eles n√£o sabem que fazem o mal. N√£o se precipite em falar, nem o seu cora√ß√£o se apresse a proferir coisa alguma diante de Deus.", resumo: "A sabedoria ensinada por Salom√£o aplica-se tamb√©m √† adora√ß√£o. A adora√ß√£o tola √© marcada pela imprud√™ncia, por muitas palavras e pouca a√ß√£o. A sabedoria nos chama a 'guardar o p√©', ou seja, a abordar Deus com rever√™ncia, ouvindo mais do que falando. A verdadeira adora√ß√£o √© um cora√ß√£o que obedece √† Palavra que ouviu.", aplicacao: "Como tem sido a sua postura em rela√ß√£o √† Palavra de Deus? Voc√™ tem se apressado a prometer coisas a Deus (como os tolos), ou tem se dedicado a ouvir e meditar em sil√™ncio? Escolha um vers√≠culo e medite nele em sil√™ncio hoje.", oracao: "Deus Santo, ensina-me a Te adorar em esp√≠rito e em verdade. Que eu seja tardio para falar e pronto para ouvir. Ajuda-me a guardar os meus passos e a submeter a minha vontade √† Tua Palavra. Am√©m." } },
            6: { pt: { h2: "Riqueza: O Engano da Acumula√ß√£o", versiculos: "<strong>Eclesiastes 5:13-14 (NAA):</strong> H√° um grave mal que vi debaixo do sol: riquezas que o seu dono guarda para o seu pr√≥prio preju√≠zo. E essas riquezas se perdem num mau neg√≥cio; e se ele gerou um filho, nada fica nas m√£os deste.", resumo: "Salom√£o, o homem mais rico, conclui que a riqueza, quando acumulada com apego ego√≠sta ('para o seu pr√≥prio preju√≠zo'), √© um grande mal. A riqueza √© 'vaidade' porque pode se perder num instante (mau neg√≥cio), ou porque quem a acumula n√£o pode lev√°-la consigo ap√≥s a morte. A sabedoria n√£o est√° na quantidade de bens, mas na capacidade de us√°-los com modera√ß√£o e generosidade, como presente de Deus.", aplicacao: "Qual √© o seu n√≠vel de apego aos seus bens? Lembre-se que o verdadeiro tesouro n√£o est√° na sua conta banc√°ria. Escolha hoje uma forma de ser generoso com o que Deus lhe deu, combatendo a mentalidade de acumula√ß√£o.", oracao: "Pai, ajuda-me a ver a riqueza como um presente e n√£o como um deus. Livra-me do apego ego√≠sta. Ensina-me a ser um mordomo fiel e generoso com os bens que Tu me confiaste, investindo no que tem valor eterno. Am√©m." } },
            7: { pt: { h2: "Fama e Legado: A Morte e o Esquecimento", versiculos: "<strong>Eclesiastes 7:1 (NAA):</strong> Melhor √© a boa reputa√ß√£o do que o melhor perfume, e o dia da morte, do que o dia do nascimento de algu√©m.", resumo: "Este vers√≠culo paradoxal nos lembra de que o fim de uma vida (o dia da morte) √© mais significativo do que o seu in√≠cio, porque revela o verdadeiro legado. A boa reputa√ß√£o ('nome') √© um dos poucos bens que 'dura' para al√©m da vida, sendo melhor que o prazer imediato. No entanto, mesmo a mem√≥ria do homem s√°bio perece (Ec 9:5). A verdadeira sabedoria √© preparar-se para o dia da morte, vivendo para Aquele que n√£o ser√° esquecido.", aplicacao: "Que tipo de 'boa reputa√ß√£o' voc√™ est√° construindo? √â baseada em servi√ßo e car√°ter, ou em status e sucesso? Concentre-se hoje em atos de bondade e fidelidade que reflitam o car√°ter de Deus, pois apenas Ele √© eterno.", oracao: "Senhor, ajuda-me a viver uma vida que honre o Teu nome. Livra-me da busca vazia por fama e aplausos humanos. Que a minha reputa√ß√£o seja de algu√©m que Te amou e serviu ao pr√≥ximo fielmente. Am√©m." } },
            8: { pt: { h2: "Injusti√ßa e Paci√™ncia: O Mist√©rio da Vida", versiculos: "<strong>Eclesiastes 8:14 (NAA):</strong> H√° uma vaidade que acontece sobre a terra: h√° justos a quem acontece o que √© pr√≥prio da conduta dos √≠mpios, e h√° √≠mpios a quem acontece o que √© pr√≥prio da conduta dos justos. Digo que tamb√©m isto √© vaidade.", resumo: "Salom√£o confronta a Injusti√ßa da vida 'debaixo do sol': √†s vezes, o justo sofre e o √≠mpio prospera. N√£o h√° um sistema de causa e efeito vis√≠vel no mundo. Diante desse mist√©rio, a sabedoria √© ter paci√™ncia e aceitar que o ser humano n√£o pode entender completamente as obras de Deus (Ec 8:17). A nossa resposta deve ser a de viver com integridade, independentemente dos resultados vis√≠veis.", aplicacao: "Voc√™ est√° amargurado pela injusti√ßa que sofreu ou testemunhou? Entregue seu desejo por vingan√ßa ou explica√ß√µes a Deus. Viva o presente com fidelidade, confiando que a justi√ßa final n√£o est√° 'debaixo do sol', mas nas m√£os de Deus.", oracao: "Deus Justo, entrego a Ti toda a minha frustra√ß√£o e amargura diante da injusti√ßa. Ajuda-me a andar por f√©, n√£o por vista, e a continuar fiel, mesmo que os √≠mpios prosperem. Que eu encontre a minha paz na certeza do Teu julgamento final. Am√©m." } },
            9: { pt: { h2: "O Prazer Simples: Desfrute a Vida na Presen√ßa de Deus", versiculos: "<strong>Eclesiastes 9:7-9 (NAA):</strong> Vai, come com alegria o teu p√£o, e bebe o teu vinho com cora√ß√£o contente, pois Deus j√° se agrada das tuas obras. [...] Desfruta a vida com a mulher que voc√™ ama, todos os dias da sua vida v√£ que Deus lhe deu debaixo do sol.", resumo: "Em meio √† certeza da morte e √† incerteza da justi√ßa humana, a resposta de Salom√£o n√£o √© o fatalismo, mas um chamado ao gozo simples. Desfrutar do trabalho, da comida e do relacionamento com quem se ama √© a forma como Deus deseja que vivamos a vida 'v√£' (limitada). O gozo √© um presente de Deus para o homem, n√£o um direito conquistado.", aplicacao: "Voc√™ tem permitido que a ansiedade ou o trabalho roubem o gozo das coisas simples? Separe um momento hoje para desfrutar plenamente de uma refei√ß√£o, de uma conversa ou de um p√¥r do sol, agradecendo a Deus pelo presente.", oracao: "Deus Generoso, obrigado pelo dom da vida e pelas alegrias simples que Tu me d√°s. Perdoa-me por deixar o peso do futuro roubar o gozo do presente. Ajuda-me a desfrutar o meu trabalho e a minha fam√≠lia como Teus presentes, com um cora√ß√£o contente. Am√©m." } },
            10: { pt: { h2: "A Necessidade de Dilig√™ncia: Agir com Sabedoria", versiculos: "<strong>Eclesiastes 9:10 (NAA):</strong> Tudo o que as suas m√£os tiverem que fazer, fa√ßa-o com toda a sua for√ßa, porque na sepultura, para onde voc√™ vai, n√£o h√° obra, nem projetos, nem conhecimento, nem sabedoria alguma.", resumo: "Este √© um forte chamado √† dilig√™ncia. A vaidade da vida n√£o deve nos levar √† pregui√ßa, mas a trabalhar com toda a nossa for√ßa enquanto temos tempo. A vida 'debaixo do sol' √© curta; a oportunidade de usar nossos talentos √© finita. Portanto, devemos agir no presente com seriedade e dedica√ß√£o, pois o futuro √© incerto e a morte √© certa.", aplicacao: "Voc√™ tem procrastinado alguma tarefa importante ou negligenciado seus deveres? Lembre-se da brevidade da vida. Assuma o compromisso de aplicar toda a sua for√ßa na tarefa que est√° √† sua frente hoje, glorificando a Deus no seu trabalho.", oracao: "Senhor, inspira-me a trabalhar com dilig√™ncia e excel√™ncia. Ajuda-me a usar o tempo que me deste com sabedoria. Que a consci√™ncia da minha mortalidade me leve a aplicar toda a minha for√ßa no que √© bom e digno do Teu nome. Am√©m." } },
            11: { pt: { h2: "Juventude e Alegria: Lembre-se do Criador", versiculos: "<strong>Eclesiastes 11:9 (NAA):</strong> Jovem, alegre-se enquanto voc√™ √© mo√ßo. Seja feliz nos dias da sua juventude. Siga os caminhos do seu cora√ß√£o e as vis√µes da sua mente, sabendo, por√©m, que de todas estas coisas Deus o trar√° a ju√≠zo.", resumo: "Salom√£o encoraja a juventude a desfrutar a vida plenamente ('siga os caminhos do seu cora√ß√£o'), mas imediatamente insere o corretivo da sabedoria: a certeza do Ju√≠zo de Deus. O gozo n√£o √© um fim em si mesmo, mas deve ser vivido com responsabilidade, sob o olhar de um Deus que v√™ tudo. O prop√≥sito final n√£o √© a liberdade, mas a presta√ß√£o de contas.", aplicacao: "Voc√™ tem vivido a sua vida como se n√£o houvesse consequ√™ncias, ou como se n√£o houvesse um Deus para prestar contas? Encontre o equil√≠brio entre o desfrute dos prazeres l√≠citos e a consci√™ncia constante da presen√ßa e do ju√≠zo do seu Criador.", oracao: "Criador, obrigado pela alegria da vida e da juventude. Que eu desfrute de tudo o que Tu me d√°s com um senso de responsabilidade para Contigo. Guarda-me da imprud√™ncia e ajuda-me a viver cada dia √† luz da Tua santidade e do Teu ju√≠zo final. Am√©m." } },
            12: { pt: { h2: "A Conclus√£o: Teme a Deus e Guarda os Seus Mandamentos", versiculos: "<strong>Eclesiastes 12:13-14 (NAA):</strong> De tudo o que se tem ouvido, a conclus√£o √© esta: tema a Deus e guarde os seus mandamentos, porque isto √© o dever de todo ser humano. Porque Deus h√° de trazer a ju√≠zo todas as obras, at√© mesmo as que est√£o escondidas, quer sejam boas, quer sejam m√°s.", resumo: "Ap√≥s a exaustiva explora√ß√£o da vida 'debaixo do sol', Salom√£o oferece a √∫nica resposta que d√° significado ao 'vapor' da exist√™ncia: o temor a Deus. O temor n√£o √© medo paralisante, mas a rever√™ncia que leva √† obedi√™ncia. √â a √∫nica atitude que prepara o ser humano para o inevit√°vel Ju√≠zo final. O sentido da vida n√£o est√° no que fazemos, mas em Aquele a quem servimos.", aplicacao: "Qual √© o seu 'dever de todo ser humano' hoje? √â o de viver em rever√™ncia a Deus. Reflita sobre onde a sua vida est√° em desobedi√™ncia a um mandamento claro d'Ele. Renove hoje o seu compromisso de tem√™-Lo e servi-Lo acima de todas as coisas e vaidades.", oracao: "Pai, que o temor do Teu nome seja o princ√≠pio da minha sabedoria. Ajuda-me a guardar os Teus mandamentos e a viver cada dia √† luz do julgamento que vir√°. Que a minha conclus√£o de vida seja a mesma do Pregador: servir e obedecer a Ti √© tudo o que importa. Em nome de Jesus. Am√©m." } }
        };

        // --- ELEMENTOS DOM ---
        const root = document.documentElement;
        const mainTitle = document.getElementById('mainTitle');
        const subTitle = document.getElementById('subTitle');
        const progressLabel = document.getElementById('progressLabel');
        const checkLabel = document.getElementById('checkLabel');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const completedCheck = document.getElementById('completedCheck');
        const devotionalContentDiv = document.getElementById('devotionalContent');
        const footerText = document.getElementById('footerText');
        const progressBar = document.getElementById('progressBar');
        const listenToggle = document.getElementById('listenToggle');
        const audioProgressFill = document.getElementById('audioProgressFill');
        const themeToggleFloater = document.getElementById('themeToggleFloater');


  // *************** FUN√á√ïES DE PERSIST√äNCIA E PROGRESSO ***************

        function getCompletedDays() {
            try {
                return JSON.parse(localStorage.getItem(`completedDays_${DEVOTIONAL_KEY}`)) || {};
            } catch (e) {
                console.error("Erro ao carregar dias conclu√≠dos:", e);
                return {};
            }
        }
        
        function saveCompletion(day, isCompleted) {
            const completedDays = getCompletedDays();
            if (isCompleted) {
                completedDays[day] = true;
            } else {
                delete completedDays[day];
            }
            localStorage.setItem(`completedDays_${DEVOTIONAL_KEY}`, JSON.stringify(completedDays));
            updateOverallProgress();
            
            if (isCompleted && isListening) {
                stopListening();
            }
        }
        
        function isCompleted(day) {
            const completedDays = getCompletedDays();
            return completedDays[day] === true;
        }

        function updateCompletedState() {
            completedCheck.checked = isCompleted(currentDay);
        }

        function getSavedProgress() {
            return parseInt(localStorage.getItem(`devotionalProgress_${DEVOTIONAL_KEY}`)) || 1;
        }

        function updateOverallProgress() {
            const completedDaysMap = getCompletedDays();
            const completedCount = Object.values(completedDaysMap).filter(v => v).length;
            const percent = (completedCount / totalDays) * 100;
            progressBar.style.width = `${percent}%`;
            prevButton.disabled = currentDay <= 1;
            nextButton.disabled = currentDay >= totalDays;
            
            updateCompletedState();
        }

  // *************** FUN√á√ïES DE NAVEGA√á√ÉO E L√ìGICA ***************
    
		function handleCompletedCheck() {
			saveCompletion(currentDay, completedCheck.checked);

            if (completedCheck.checked && currentDay < totalDays) {
                setTimeout(nextDay, 500); 
            }
        }
        
        function loadDevotionalContent(day, direction) {
            // currentLang √© 'pt-BR' fixo
            const t = translations['pt-BR']; 
            // O idioma do conte√∫do √© fixo para 'pt'
            const data = devotionalContent[day] ? devotionalContent[day]['pt'] : null;
            
            if (!data) {
                devotionalContentDiv.innerHTML = `<p style="text-align: center;">Conte√∫do n√£o dispon√≠vel para o Dia ${day}.</p>`;
                return;
            }
            
            if (isListening) stopListening();

            const animationClassIn = direction === 1 ? 'page-in-right' : 'page-in-left';
            const animationClassOut = direction === 1 ? 'page-out-left' : 'page-out-right';
            
            if (direction !== 0) {
                devotionalContentDiv.classList.add(animationClassOut);
            }
            
            setTimeout(() => {
                devotionalContentDiv.innerHTML = `
                    <h2 id="dayTitle">${t.dayTitle} ${day}: ${data.h2}</h2>
                    <div class="section">
                        <strong>${t.keyVerse}:</strong>
                        <p class="versiculos">${data.versiculos}</p>
                    </div>
                    <div class="section">
                        <strong>${t.summary}:</strong>
                        <p>${data.resumo}</p>
                    </div>
                    <div class="section">
                        <strong>${t.application}:</strong>
                        <p>${data.aplicacao}</p>
                    </div>
                    <p class="oracao-final">${t.prayer}: ${data.oracao}</p>
                `;
                
                document.getElementById('pageCounter').innerText = `P√°gina ${day} de ${totalDays}`;

                if (direction !== 0) {
                    devotionalContentDiv.classList.remove(animationClassOut);
                    devotionalContentDiv.classList.add(animationClassIn);
                } else {
                    devotionalContentDiv.classList.add('page-in-right');
                }
                
                // Atualiza o conte√∫do para leitura de voz
                ttsContent = devotionalContentDiv.textContent;

                setTimeout(() => { devotionalContentDiv.classList.remove('page-in-left', 'page-in-right'); }, 400);

            }, direction !== 0 ? 300 : 0);
        }
        
        function nextDay() {
            if (currentDay < totalDays) {
                currentDay++;
                localStorage.setItem(`devotionalProgress_${DEVOTIONAL_KEY}`, currentDay);
                updateTexts(1);
            }
        }
        
        function prevDay() {
            if (currentDay > 1) {
                currentDay--;
                localStorage.setItem(`devotionalProgress_${DEVOTIONAL_KEY}`, currentDay);
                updateTexts(-1);
            }
        }

        function updateTexts(direction = 0) {
            const t = translations['pt-BR']; // Idioma fixo

            // REMOVIDO: document.documentElement.lang = 'pt'; (Herda do <html lang="pt-BR">)

            mainTitle.innerText = t.mainTitle;
            subTitle.innerText = t.subTitle;
            progressLabel.innerText = `${t.progressLabelPrefix}${t.dayTitle} ${currentDay} de ${totalDays}`;
            checkLabel.innerText = t.checkLabel;
            prevButton.innerText = t.navPrev;
            nextButton.innerText = t.navNext;
            footerText.innerText = t.footerText;
            
            updateThemeToggleButtonText(); // Bot√£o de tema oculto, mas a fun√ß√£o √© chamada para evitar erros
            updateTtsButtonText();

            loadDevotionalContent(currentDay, direction);
            updateOverallProgress();
        }

  // *************** FUN√á√ïES DE TEMA (Ocultas, mas funcionais se desocultar o bot√£o) ***************

        let currentTheme = SAVED_THEME;
        
        function applyTheme(theme) {
            currentTheme = theme;
            localStorage.setItem('theme', theme);
            document.body.classList.remove('light-theme', 'dark-theme');
            document.body.classList.add(theme === 'dark' ? 'dark-theme' : 'light-theme');
        }

        function updateThemeToggleButtonText() {
            const t = translations['pt-BR']; 
            if (currentTheme === 'light') {
                themeToggleFloater.innerHTML = themeMap['light'].icon; 
                themeToggleFloater.title = t.themeLight;
            } else {
                themeToggleFloater.innerHTML = themeMap['dark'].icon; 
                themeToggleFloater.title = t.themeDark;
            }
        }
        
        function toggleDarkMode() {
            const newTheme = themeMap[currentTheme].next;
            applyTheme(newTheme);
            updateThemeToggleButtonText(); 
        }


  // *************** NOVAS FUN√á√ïES DE ACESSIBILIDADE ***************

        // --- CONTROLE DE FONTE ---
        function updateFontSize() {
            fontScale = Math.min(Math.max(fontScale, FONT_MIN), FONT_MAX);
            root.style.setProperty('--base-font-scale', fontScale);
            localStorage.setItem('fontScale', fontScale.toFixed(2));
        }

        function increaseFontSize() {
            fontScale += 0.1;
            updateFontSize();
        }

        function decreaseFontSize() {
            fontScale -= 0.1;
            updateFontSize();
        }

        // --- TEXT-TO-SPEECH (TTS) ---
        function initTTS() {
             speech = window.speechSynthesis;
             if (speech.getVoices().length === 0) {
                 speech.onvoiceschanged = () => {
                     setupTtsUtterance(speech.getVoices());
                 };
             } else {
                 setupTtsUtterance(speech.getVoices());
             }
        }
        
        function setupTtsUtterance(voices) {
             // Busca por voz em Portugu√™s
             let voice = voices.find(v => v.lang.startsWith('pt')) || voices.find(v => v.default) || voices[0];
             
             ttsUtterance = new SpeechSynthesisUtterance();
             ttsUtterance.lang = 'pt-BR';
             ttsUtterance.voice = voice;
             ttsUtterance.rate = 1;

             ttsUtterance.onstart = () => {
                 isListening = true;
                 listenToggle.setAttribute('data-state', 'pause');
                 updateTtsButtonText();
             };

             ttsUtterance.onend = () => {
                 stopListening();
             };

             ttsUtterance.onpause = () => {
                 listenToggle.setAttribute('data-state', 'continue');
                 updateTtsButtonText();
             };
             
             ttsUtterance.onresume = () => {
                 listenToggle.setAttribute('data-state', 'pause');
                 updateTtsButtonText();
             };

             ttsUtterance.onboundary = (event) => {
                 if (event.name === 'word') {
                     ttsCurrentCharacter = event.charIndex;
                     updateAudioProgress();
                 }
             };
        }


        function updateTtsButtonText() {
            const t = translations['pt-BR']; 
            const state = listenToggle.getAttribute('data-state');
            
            if (state === 'stop' || !isListening) {
                 listenToggle.innerHTML = `<span role="img" aria-label="Alto-falante">üîä</span> ${t.ttsListen}`;
            } else if (state === 'pause') {
                 listenToggle.innerHTML = `<span role="img" aria-label="Pausa">‚è∏</span> ${t.ttsPause}`;
            } else if (state === 'continue') {
                 listenToggle.innerHTML = `<span role="img" aria-label="Reproduzir">‚ñ∂Ô∏è</span> ${t.ttsContinue}`;
            }
        }
        
        function startListening() {
            if (!ttsContent) return;
            
            if (speech.speaking && !speech.paused) {
                 speech.pause();
            } else if (speech.paused) {
                 speech.resume();
            } else {
                 if (!ttsUtterance) initTTS(); 
                 ttsUtterance.text = ttsContent;
                 speech.speak(ttsUtterance);
            }
        }

        function stopListening() {
            if (speech.speaking) {
                speech.cancel();
            }
            isListening = false;
            listenToggle.setAttribute('data-state', 'stop');
            audioProgressFill.style.width = '0%';
            ttsCurrentCharacter = 0;
            updateTtsButtonText();
        }

        function updateAudioProgress() {
            if (!isListening || !ttsUtterance.text) return;

            const textLength = ttsUtterance.text.length;
            const progress = (ttsCurrentCharacter / textLength) * 100;
            audioProgressFill.style.width = `${progress}%`;
        }
        
  // *************** EXECU√á√ÉO PRINCIPAL (INICIALIZA√á√ÉO) ***************
       window.onload = () => {
            
            // üö® LIMPEZA FOR√áADA DAS CHAVES ANTIGAS (Manter esta linha para garantir que o devocional reinicie em caso de conflito)
            localStorage.removeItem('completedDays_suficiencia_de_cristo'); 
            localStorage.removeItem('devotionalProgress_suficiencia_de_cristo');
            
            // 1. Carrega as prefer√™ncias
            applyTheme(SAVED_THEME);
            updateFontSize(); 
            initTTS(); 

            // 2. Carrega o dia salvo e atualiza a UI (dire√ß√£o 0 para sem anima√ß√£o inicial)
            currentDay = getSavedProgress();
            updateTexts(0); 
            
            // 3. Configura os Listeners de Eventos
            // O bot√£o de tema est√° oculto, mas se fosse vis√≠vel, este listener funcionaria:
            themeToggleFloater.addEventListener('click', toggleDarkMode); 
            
            prevButton.addEventListener('click', prevDay);
            nextButton.addEventListener('click', nextDay);
            completedCheck.addEventListener('change', handleCompletedCheck);
            
            // Listeners para o controle de fonte
            document.getElementById('fontSizeIncrease').addEventListener('click', increaseFontSize);
            document.getElementById('fontSizeDecrease').addEventListener('click', decreaseFontSize);
            
            // Listener para o controle de TTS
            listenToggle.addEventListener('click', startListening);
        };
        
    </script>
    
    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>
        // Configura√ß√£o VLibras
        new window.VLibras.Widget('https://vlibras.gov.br/app');
    </script>
</body>
</html>