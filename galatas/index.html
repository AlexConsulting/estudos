<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7 Dias: A Sufici√™ncia de Cristo (Devocional)</title>
<style>
        /* 0. Vari√°vel CSS para controle de Zoom/Fonte (Acessibilidade) */
        :root {
            --base-font-scale: 1.0; /* Valor padr√£o para 100% */
        }
        
        /* 1. CSS PRINCIPAL (LIGHT THEME - PADR√ÉO) - VERS√ÉO SEGURA PARA DESKTOP */
        html, body {
            margin: 0;
            padding: 0;
            overflow-x: hidden; 
        }

        body {
            font-family: 'Georgia', serif; 
            margin: 0; 
            background-color: #e6e0d3; color: #333; line-height: 1.6;
            /* **FIX DESKTOP:** Mant√©m o layout centralizado original para desktop */
            display: flex; 
            flex-direction: column; 
            justify-content: flex-start; /* Ajuste para evitar que o desktop flutue muito */
            align-items: center;
            min-height: 100vh; 
            padding: 20px 0; 
            transition: background-color 0.3s, color 0.3s;
        }
        main {
            width: auto; 
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 0; 
            padding-bottom: 0;
        }

        .book-container {
            max-width: 650px; width: 90%; background: #fdfdfd; padding: 30px 40px;
            border-radius: 8px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2); border: 1px solid #ccc;
            position: relative; transition: background 0.3s, box-shadow 0.3s;
            font-size: calc(var(--base-font-scale) * 1em); 
            margin-top: 0; 
            margin-bottom: 0;
            box-sizing: border-box; 
        }
        h1 {
            color: #4b0082; text-align: center; font-family: 'Times New Roman', serif;
            border-bottom: 2px solid #4b0082; padding-bottom: 10px; margin-bottom: 10px;
        }
        .subtitle {
            text-align: center; font-style: italic; margin-bottom: 20px; color: #555; font-size: 0.95em;
        }
        h2 {
            color: #007bff; font-size: 1.5em; text-align: center; margin-top: 10px; margin-bottom: 20px;
        }
        .versiculos {
            font-style: italic; background-color: #f0f8ff; padding: 15px;
            border-left: 5px solid #28a745; margin: 15px 0; font-weight: 500;
        }
        .section {
            margin-top: 20px; padding: 10px; border-bottom: 1px dashed #ddd;
        }
        .section strong {
            display: block; color: #dc3545; margin-bottom: 5px; font-weight: bold;
        }
        .oracao-final {
            margin-top: 25px; padding: 15px; background-color: #fffae0;
            border-left: 5px solid #ffc107; font-weight: bold; text-align: center; font-style: italic;
        }
        
        /* 2. NAVEGA√á√ÉO E UTILS (Desktop Padr√£o) */
        .top-utils {
            /* Cont√©m: Ou√ßa Aqui, Seletor de Idioma e Tema. */
            display: flex; 
            justify-content: center; 
            align-items: center; 
            margin-bottom: 15px; 
            flex-wrap: wrap; 
            gap: 15px; 
        }
        .navigation {
            display: flex; justify-content: space-between; align-items: center; margin-top: 30px;
            padding-top: 15px; border-top: 1px solid #ddd; flex-wrap: wrap; gap: 15px; 
        }
        .nav-button {
            padding: 10px 15px; cursor: pointer; border: 1px solid #007bff; border-radius: 5px;
            background-color: #007bff; color: white; transition: opacity 0.2s, background 0.2s, border-color 0.2s;
        }
        .nav-button:disabled { opacity: 0.5; cursor: default; }
        button:focus, a:focus, input:focus, #accessibilityFloater button:focus, #langSelectButton:focus {
            outline: 3px solid #00ff73; outline-offset: 2px; box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.5);
        }

        /* 2.1. Seletor de Idioma (Desktop) */
        .language-selector-wrapper { position: relative; display: inline-block; }
        #langSelectButton { padding: 8px 15px; cursor: pointer; background-color: #f0f0f0; border: 1px solid #ccc; border-radius: 5px; font-weight: bold; }
        .lang-dropdown { position: absolute; top: 100%; right: 0; background-color: #fff; border: 1px solid #ccc; border-radius: 5px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); z-index: 10; padding: 5px 0; min-width: 150px; display: none; }
        .lang-dropdown button { display: block; width: 100%; padding: 10px 15px; text-align: left; background: none; border: none; cursor: pointer; transition: background-color 0.2s; }
        .lang-dropdown button:hover { background-color: #f0f0f0; }
        .dark-theme #langSelectButton { background-color: #2c2c2c; border-color: #444; color: #f4f4f4; }
        .dark-theme .lang-dropdown { background-color: #1e1e1e; border-color: #444; }
        .dark-theme .lang-dropdown button { color: #f4f4f4; }
        .dark-theme .lang-dropdown button:hover { background-color: #333; }
        
        /* 3. DARK THEME CSS (Mantido) */
        .dark-theme { background-color: #121212; color: #f4f4f4; }
        .dark-theme .book-container { background: #1e1e1e; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5); border-color: #333; }
        .dark-theme h1 { color: #bb86fc; border-bottom-color: #bb86fc; }
        .dark-theme .subtitle { color: #aaa; }
        .dark-theme h2 { color: #03dac6; }
        .dark-theme .versiculos { background-color: #2c2c2c; border-left-color: #03dac6; }
        .dark-theme .section { border-bottom-color: #444; }
        .dark-theme .section strong { color: #cf6679; }
        .dark-theme .oracao-final { background-color: #33331c; border-left-color: #ffd600; }
        .dark-theme .nav-button { background-color: #03dac6; border-color: #03dac6; color: #1e1e1e; }
        
        /* 4. Menu de Acessibilidade Flutuante (Desktop - Padr√£o) */
        #accessibilityFloater {
            position: fixed; right: 20px; top: 50%; transform: translateY(-50%);
            display: flex; flex-direction: column; z-index: 1000;
            padding: 8px 5px; background: rgba(255, 255, 255, 0.8); border: 1px solid #ccc;
            border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        #accessibilityFloater button {
            padding: 5px 8px; margin: 5px 0; cursor: pointer; border: 1px solid #007bff;
            background-color: #f0f0f0; color: #333; font-weight: bold; font-size: 1.1em;
            border-radius: 5px; transition: background-color 0.2s;
        }
        #accessibilityFloater button:hover { background-color: #e0e0e0; }
        .dark-theme #accessibilityFloater { background: rgba(30, 30, 30, 0.8); border: 1px solid #444; }
        .dark-theme #accessibilityFloater button { background-color: #2c2c2c; color: #f4f4f4; border-color: #03dac6; }
        .dark-theme #accessibilityFloater button:hover { background-color: #383838; }

        /* 5. AJUSTES VLIBRAS (Desktop - PADR√ÉO) */
        div[vw] {
            position: fixed !important;
            bottom: 25px !important; 
            right: 25px !important;
            left: auto !important; 
            top: auto !important; 
            z-index: 999 !important; 
        }

        /* 6. ESTILOS DA BARRA DE PROGRESSE E CHECKBOX (Mantido) */
        .progress-bar-wrapper { background-color: #ddd; border-radius: 10px; height: 10px; overflow: hidden; box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2); }
        .progress-bar { height: 100%; width: 0%; background-color: #28a745; border-radius: 10px; transition: width 0.5s ease-in-out; }
        .dark-theme #progressLabel { color: #03dac6; }
        .dark-theme .progress-bar-wrapper { background-color: #333; }
        .dark-theme .progress-bar { background-color: #03dac6; }
        .progress-check {
             display: flex; align-items: center; justify-content: center; margin: 0; flex-grow: 0; flex-shrink: 0;
             padding: 5px 10px; background-color: #e6f7ff; border: 1px solid #b3e0ff; border-radius: 5px; transition: background-color 0.3s; order: 0;
        }
        .progress-check label { margin-left: 10px; font-weight: bold; color: #1e8449; cursor: pointer; }
        .progress-check input[type="checkbox"] { transform: scale(1.3); cursor: pointer; }
        .dark-theme .progress-check { background-color: #2c2c2c; border-color: #444; }
        .dark-theme .progress-check label { color: #03dac6; }
        #audioProgressContainer { height: 5px; width: 100%; background-color: #ddd; border-radius: 2px; overflow: hidden; margin-top: 5px; margin-bottom: 10px; }
        #audioProgressBar { height: 100%; width: 0%; background-color: #ffc107; transition: width 0.1s linear; }
        .dark-theme #audioProgressContainer { background-color: #333; }
        .dark-theme #audioProgressBar { background-color: #ffd600; }


        /* 7. MEDIA QUERIES (Ajustes para Celular - max-width: 600px) */
        @media (max-width: 600px) {
            
            /* üí• FIX PRINCIPAL: ZERA O ESPA√áAMENTO SUPERIOR DO CONTE√öDO NO MOBILE */
            body, html {
                margin: 0 !important;
                padding-top: 0 !important;
                padding-bottom: 0 !important;
                overflow-x: hidden; 
                /* üí• FIX: For√ßa o conte√∫do a iniciar no topo */
                justify-content: flex-start !important; 
                align-items: flex-start !important;
            }
            main {
                width: 100%;
                padding-top: 0 !important;
                padding-bottom: 0 !important;
            }
            .book-container {
                /* ESPA√áAMENTO ZERO */
                margin-top: 0 !important; 
                margin-bottom: 20px; 
                
                /* Garantia de largura total sem overflow */
                width: 100% !important; 
                max-width: 100% !important;
                padding: 20px 25px; 
                
                /* ‚úÖ CORRE√á√ÉO FINAL DO VERS√çCULO: Aumenta padding superior para garantir visibilidade */
                padding-top: 130px; /* Aumentado de 120px para 130px */
                
                box-shadow: none; 
                border: none; 
            }

            /* Oculta o container .top-utils original */
            .top-utils { display: none !important; }

            /* üí• 1. OU√áA AQUI (FIXO: Topo Central) - VISIBILIDADE M√ÅXIMA FOR√áADA */
            #listenToggle {
                position: fixed;
                top: 40px; 
                left: 50%; 
                transform: translateX(-50%); 
                z-index: 1011 !important; 
                
                /* VISIBILIDADE FOR√áADA */
                display: flex !important; 
                visibility: visible !important; 
                
                /* Dimens√µes e estilos */
                padding: 5px 15px; 
                font-size: 0.9em; 
                background-color: #f0f0f0; 
                border: 1px solid #ccc;
                border-radius: 5px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                align-items: center;
                justify-content: center;
            }
            .dark-theme #listenToggle {
                background-color: #2c2c2c; 
                border-color: #444;
            }

            /* üí• 2. A+/A- (FIXO: Topo Esquerdo) */
            #accessibilityFloater {
                position: fixed; 
                top: 5px; 
                left: 5px; 
                right: auto; 
                transform: translateY(0); 
                flex-direction: row; 
                padding: 5px; 
                background: rgba(255, 255, 255, 0.9); 
                border: 1px solid #ccc;
                border-radius: 8px; 
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                z-index: 1010;
            }
            #accessibilityFloater button { 
                margin: 0 2px; 
                padding: 3px 6px; 
                font-size: 0.9em; 
            }

            /* üí• 3. Seletor de Idioma e Tema (FIXO: Topo Direito) */
            .language-selector-wrapper {
                position: fixed !important;
                top: 5px;
                right: 5px;
                left: auto;
                z-index: 1010;
                display: flex; /* Garante que o idioma e o tema fiquem na mesma linha */
                align-items: center;
                gap: 5px; /* Espa√ßo entre os bot√µes */
            }

            #themeToggle {
                /* Garante que o bot√£o de tema esteja no wrapper */
                margin-right: 0 !important;
            }

            .lang-dropdown {
                /* For√ßa o dropdown a descer na tela, ajusta a posi√ß√£o */
                top: calc(100% + 5px) !important;
                right: 0;
            }
            #langSelectButton {
                padding: 5px 10px;
                font-size: 0.85em;
            }
            
            /* üí• 4. VLIBRAS (FIXO: Canto Inferior Direito - N√ÉO CONFLITA MAIS COM O TOPO) */
            div[vw] {
                position: fixed !important;
                bottom: 25px !important; 
                right: 5px !important;
                left: auto !important; 
                top: auto !important; 
                z-index: 1010 !important; 
                
                /* Tamanho ajustado para visibilidade */
                width: 40px !important; 
                height: 40px !important;
                background-color: #fdfdfd; 
                border-radius: 5px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            .vw-access-button {
                width: 40px !important;
                height: 40px !important;
            }
            .dark-theme div[vw] {
                background-color: #1e1e1e;
            }
            
            /* Outros ajustes de mobile */
            .navigation { flex-direction: column; gap: 10px; margin-top: 15px; } 
            .nav-button { width: 100%; }
            .progress-check { order: -1; width: 100%; }
        }

        /* MEDIA QUERY: Ajuste para telas muito pequenas, se necess√°rio */
        @media (max-width: 400px) {
            #accessibilityFloater button { font-size: 0.8em; padding: 2px 4px; }
            #listenToggle { font-size: 0.75em; padding: 3px 10px; }
            /* ‚úÖ CORRE√á√ÉO: book-container para telas muito pequenas */
            .book-container { padding-top: 120px; } /* Ajuste fino */
        }
    </style>
</head>
<body class="light-theme">

    <div id="accessibilityFloater" title="Controles de Acessibilidade">
        <button id="fontSizeIncrease" title="Aumentar Tamanho da Fonte">A+</button>
        <button id="fontSizeDecrease" title="Diminuir Tamanho da Fonte">A-</button>
    </div>
    
    <main>
        <div class="book-container">
            
            <div class="top-utils">
                
                <button id="listenToggle" class="nav-button" title="Ouvir Conte√∫do" disabled>
                    </button>

                <div class="language-selector-wrapper">
                    <button id="themeToggle" class="nav-button" title="Alternar entre tema claro e escuro"></button>
                    <button id="langSelectButton" aria-expanded="false" aria-controls="langDropdown" title="Selecionar Idioma"></button>
                    <div class="lang-dropdown" id="langDropdown">
                        <button data-lang="pt-BR">Portugu√™s (Brasil) üáßüá∑</button>
                        <button data-lang="en">English (US) üá∫üá∏</button>
                        <button data-lang="es">Espa√±ol (Latam) üá™üá∏</button>
                        <button data-lang="fr">Fran√ßais (France) üá´üá∑</button>
                    </div>
                </div>

            </div>
            
            <div id="audioProgressContainer" style="display: none;">
                <div id="audioProgressBar" class="progress-bar"></div>
            </div>

            <h1 id="mainTitle"></h1>
            <p class="subtitle" id="subTitle"></p>
            
            <div id="progressContainer" style="margin-bottom: 15px;">
                <p id="progressLabel" style="text-align: center; font-size: 0.9em; margin-bottom: 5px; color: #4b0082; font-weight: bold;"></p>
                <div class="progress-bar-wrapper">
                    <div id="progressBar" class="progress-bar"></div>
                </div>
            </div>
            <p id="pageCounter" style="text-align: right;"></p>
            
            <div id="devotionalContent">
                </div>

            <div class="navigation">
                <button id="prevButton" class="nav-button" disabled>‚Üê Anterior</button>
                
                <div class="progress-check">
                    <input type="checkbox" id="completedCheck">
                    <label for="completedCheck" id="checkLabel">Marcar como Conclu√≠do</label>
                </div>
                
                <button id="nextButton" class="nav-button">Pr√≥ximo ‚Üí</button>
            </div>
        </div>
    </main>
    <footer>
        <p>Devocional adaptado e criado por Alex Silva | <span id="footerText"></span></p>
    </footer>

    <script>
        // --- DADOS DE ESTADO E PREFER√äNCIAS ---
        const SAVED_THEME = localStorage.getItem('theme') || 'light'; 
        const SAVED_LANG = localStorage.getItem('language') || 'pt-BR';
        
        let currentTheme = SAVED_THEME;
        let currentLang = SAVED_LANG; 
        
        const totalDays = 7;
        let currentDay = 1;
        
        // TTS
        const synth = window.speechSynthesis; 
        let utterance = null; 
        let totalChars = 0; 
        let ttsVoices = []; 
        let ttsInitialized = false; 
        
        // CHAVE √öNICA DO DEVOCIONAL.
        const DEVOTIONAL_KEY = 'galatas'; 
        
        // ACESSIBILIDADE DE FONTE
        let currentFontSize = parseFloat(localStorage.getItem('fontSize')) || 1.0; 
        const FONT_STEP = 0.1; 
        const FONT_MAX = 1.4;  
        const FONT_MIN = 0.8;  
        
        // --- MAPEAMENTO DE TEXTOS E METADADOS ---

        const themeMap = {
            light: { icon: 'üåô Tema Escuro', alt: 'Alternar para tema escuro' },
            dark: { icon: '‚òÄÔ∏è Tema Claro', alt: 'Alternar para tema claro' }
        };

        const flagMap = {
            'pt-BR': 'üáßüá∑',
            'en': 'üá∫üá∏',
            'es': 'üá™üá∏',
            'fr': 'üá´üá∑'
        };

        const translations = {
            'pt-BR': {
                mainTitle: "7 Dias: A Sufici√™ncia de Cristo (Livro de G√°latas)",
				subTitle: "Uma caminhada de gra√ßa, identidade e liberdade",
                dayTitle: "Dia",
                progressLabelPrefix: "Progresso: ",
                checkLabel: "Marcar como Conclu√≠do",
                navPrev: "‚Üê Anterior",
                navNext: "Pr√≥ximo ‚Üí",
                footerText: "Direitos Reservados 2024",
                listenStart: "üîä Ou√ßa Aqui", 
                listenStop: "üõë Parar Leitura",
                listenPause: "‚è∏Ô∏è Pausar √Åudio",
                listenResume: "‚ñ∂Ô∏è Continuar",
                noContentAlert: "Conte√∫do para leitura n√£o encontrado.",
                ttsLoading: "‚è≥ Carregando √Åudio...", 
                ttsUnsupported: "‚ùå √Åudio Indispon√≠vel", 
                versiculoChave: "Vers√≠culo Chave:", 
                resumoMeditacao: "Resumo/Medita√ß√£o:", 
                aplicacaoPratica: "Aplica√ß√£o Pr√°tica:", 
                oracaoLabel: "Ora√ß√£o:",
            },
            'en': {
                mainTitle: "7 Days: The Sufficiency of Christ (Book of Galatians)",
                subTitle: "A journey of grace, identity, and freedom",
                dayTitle: "Day",
                progressLabelPrefix: "Progress: ",
                checkLabel: "Mark as Completed",
                navPrev: "‚Üê Previous",
                navNext: "Next ‚Üí",
                footerText: "All Rights Reserved 2024",
                listenStart: "üîä Listen Here", 
                listenStop: "üõë Stop Reading",
                listenPause: "‚è∏Ô∏è Pause Audio",
                listenResume: "‚ñ∂Ô∏è Continue",
                noContentAlert: "Content for reading not found.",
                ttsLoading: "‚è≥ Loading Audio...", 
                ttsUnsupported: "‚ùå Audio Unavailable",
                versiculoChave: "Key Verse:", 
                resumoMeditacao: "Summary/Meditation:", 
                aplicacaoPratica: "Practical Application:", 
                oracaoLabel: "Prayer:",
            },
            'es': {
                mainTitle: "7 D√≠as: La Suficiencia de Cristo (Libro de G√°latas)",
                subTitle: "Un camino de gracia, identidad y libertad",
                dayTitle: "D√≠a",
                progressLabelPrefix: "Progreso: ",
                checkLabel: "Marcar como Completado",
                navPrev: "‚Üê Anterior",
                navNext: "Siguiente ‚Üí",
                footerText: "Todos los Derechos Reservados 2024",
                listenStart: "üîä Escuchar Aqu√≠", 
                listenStop: "üõë Detener Lectura",
                listenPause: "‚è∏Ô∏è Pausar Audio",
                listenResume: "‚ñ∂Ô∏è Continuar",
                noContentAlert: "Contenido para lectura no encontrado.",
                ttsLoading: "‚è≥ Cargando Audio...", 
                ttsUnsupported: "‚ùå Audio No Disponible",
                versiculoChave: "Vers√≠culo Clave:", 
                resumoMeditacao: "Resumen/Meditaci√≥n:", 
                aplicacaoPractica: "Aplicaci√≥n Pr√°ctica:", 
                oracaoLabel: "Oraci√≥n:",
            },
            'fr': {
                mainTitle: "7 Jours: La Suffisance de Christ (Livre des Galates)",
                subTitle: "Un voyage de gr√¢ce, d'identit√© et de libert√©",
                dayTitle: "Jour",
                progressLabelPrefix: "Progr√®s: ",
                checkLabel: "Marquer comme Termin√©",
                navPrev: "‚Üê Pr√©c√©dent",
                navNext: "Suivant ‚Üí",
                footerText: "Tous Droits R√©serv√©s 2024",
                listenStart: "üîä √âcouter Ici", 
                listenStop: "üõë Arr√™ter Lecture",
                listenPause: "‚è∏Ô∏è Mettre en Pause",
                listenResume: "‚ñ∂Ô∏è Reprendre",
                noContentAlert: "Contenu de lecture introuvable.",
                ttsLoading: "‚è≥ Chargement Audio...", 
                ttsUnsupported: "‚ùå Audio Indisponible",
                versiculoChave: "Verset Cl√©:", 
                resumoMeditacao: "R√©sum√©/M√©ditation:", 
                aplicacaoPratica: "Application Pratique:", 
                oracaoLabel: "Pri√®re:",
            }
        };


        // --- ELEMENTOS DOM ---
        const mainTitle = document.getElementById('mainTitle');
        const subTitle = document.getElementById('subTitle');
        const progressLabel = document.getElementById('progressLabel');
        const checkLabel = document.getElementById('checkLabel');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const completedCheck = document.getElementById('completedCheck');
        const devotionalContentDiv = document.getElementById('devotionalContent');
        const footerText = document.getElementById('footerText');
        const progressBar = document.getElementById('progressBar');
        const listenToggle = document.getElementById('listenToggle'); 
        const audioProgressContainer = document.getElementById('audioProgressContainer');
        const audioProgressBar = document.getElementById('audioProgressBar');
        const langSelectButton = document.getElementById('langSelectButton');
        const themeToggle = document.getElementById('themeToggle'); 
        const langDropdown = document.getElementById('langDropdown');

  // * FUN√á√ïES DE UTILIDADE *
    
        function handleCompletedCheck() {
			saveCompletion(currentDay, completedCheck.checked);

		if (completedCheck.checked && currentDay < totalDays) {
			nextDay();
    }
}
        
        // --- FUN√á√ïES DE CONTROLE DE FONTE ---
        function updateFontSize() {
            document.documentElement.style.setProperty('--base-font-scale', currentFontSize.toFixed(2));
            localStorage.setItem('fontSize', currentFontSize.toFixed(2));
        }

        function increaseFontSize() {
            if (currentFontSize < FONT_MAX) {
                currentFontSize = Math.min(FONT_MAX, currentFontSize + FONT_STEP);
                updateFontSize();
            }
        }

        function decreaseFontSize() {
            if (currentFontSize > FONT_MIN) {
                currentFontSize = Math.max(FONT_MIN, currentFontSize - FONT_STEP);
                updateFontSize();
            }
        }

        // --- FUN√á√ïES DE TEMA ---
        function applyTheme(theme) {
            currentTheme = theme;
            localStorage.setItem('theme', theme);
            document.body.classList.remove('light-theme', 'dark-theme');
            document.body.classList.add(theme === 'dark' ? 'dark-theme' : 'light-theme');
            updateThemeToggleText();
        }

        function toggleDarkMode() {
            applyTheme(currentTheme === 'dark' ? 'light' : 'dark');
        }

        function loadThemePreference() {
            applyTheme(SAVED_THEME);
        }

        function updateThemeToggleText() {
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            themeToggle.innerText = themeMap[newTheme].icon;
            themeToggle.title = themeMap[newTheme].alt;
        }

        // --- FUN√á√ïES DE IDIOMA ---
        function setLanguage(newLang) {
            if (currentLang === newLang) return; 
            currentLang = newLang;
            localStorage.setItem('language', newLang);
            updateTexts(0);
        }

        function updateLanguageSelectorText() {
            const t = translations[currentLang] || translations['pt-BR'];
            const flag = flagMap[currentLang] || 'üåê';
            langSelectButton.innerText = `${flag} ${t.dayTitle} ${currentDay}`;
            
            // Fecha o dropdown ap√≥s a sele√ß√£o
            langDropdown.style.display = 'none';
            langSelectButton.setAttribute('aria-expanded', 'false');
        }

        
        // FUN√á√ÉO TTS: Fun√ß√µes de controle da barra de progresso do √°udio
        function resetAudioProgressBar(hide = false) {
            if (audioProgressBar) audioProgressBar.style.width = '0%';
            if (audioProgressContainer) {
                audioProgressContainer.style.display = hide ? 'none' : 'block';
            }
        }

        // --- FUN√á√ÉO DE ATUALIZA√á√ÉO DE TEXTOS ---
        function updateTexts(direction = 1) {
            const t = translations[currentLang] || translations['pt-BR'];
            document.documentElement.lang = currentLang.split('-')[0];
            
            mainTitle.innerText = t.mainTitle;
            subTitle.innerText = t.subTitle;
            progressLabel.innerText = `${t.progressLabelPrefix}${t.dayTitle} ${currentDay} de ${totalDays}`;
            checkLabel.innerText = t.checkLabel;
            prevButton.innerText = t.navPrev;
            nextButton.innerText = t.navNext;
            footerText.innerText = t.footerText;

            updateLanguageSelectorText();
            
            const contentLangKey = currentLang.substring(0, 2);
            loadDevotionalContent(currentDay, contentLangKey, t);
            updateOverallProgress();

            if (window.speechSynthesis && window.speechSynthesis.speaking) {
                stopSpeaking();
            }
        }

        // --- FUN√á√ÉO DE CARREGAMENTO DE CONTE√öDO ---
        function loadDevotionalContent(day, contentLangKey, t) {
            // Tenta carregar o conte√∫do para o dia e idioma, se falhar, tenta PT como fallback
            const data = devotionalContent[day] ? devotionalContent[day][contentLangKey] || devotionalContent[day]['pt'] : null;

            if (!data) {
                devotionalContentDiv.innerHTML = `<p style="text-align: center;">${t.noContentAlert || `Conte√∫do n√£o dispon√≠vel para o ${t.dayTitle} ${day} neste idioma.`}</p>`;
                return;
            }

            devotionalContentDiv.innerHTML = `
                <h2 id="dayTitle">${t.dayTitle} ${day}: ${data.h2}</h2>
                <div class="section">
                    <strong>${t.versiculoChave}</strong>
                    <p class="versiculos">${data.versiculos}</p>
                </div>
                <div class="section">
                    <strong>${t.resumoMeditacao}</strong>
                    <p>${data.resumo}</p>
                </div>
                <div class="section">
                    <strong>${t.aplicacaoPratica}</strong>
                    <p>${data.aplicacao}</p>
                </div>
                <p class="oracao-final">${t.oracaoLabel} ${data.oracao}</p>
            `;

            document.getElementById('pageCounter').innerText = `${t.dayTitle} ${day} de ${totalDays}`;

            updateListenToggle('start');
        }

        // --- FUN√á√ïES DE NAVEGA√á√ÉO ---
        function nextDay() {
            stopSpeaking();
            if (currentDay < totalDays) {
                currentDay++;
                localStorage.setItem(`devotionalProgress_${DEVOTIONAL_KEY}`, currentDay);
                updateTexts(1);
            }
        }

        function prevDay() {
            stopSpeaking();
            if (currentDay > 1) {
                currentDay--;
                localStorage.setItem(`devotionalProgress_${DEVOTIONAL_KEY}`, currentDay);
                updateTexts(-1);
            }
        }

        // --- FUN√á√ïES DE LEITURA (TEXT-TO-SPEECH) ---
        function getVoiceForLanguage(langCode) {
            const desiredLang = langCode.toLowerCase();
            
            if (ttsVoices.length === 0) {
                console.warn('TTS: Vozes n√£o carregadas.');
                return null;
            }

            let voice = ttsVoices.find(v => v.lang.toLowerCase() === desiredLang && v.localService);
            
            if (!voice) {
                voice = ttsVoices.find(v => v.lang.toLowerCase() === desiredLang);
            }
            
            if (!voice) {
                const langPrefix = desiredLang.substring(0, 2);
                voice = ttsVoices.find(v => v.lang.toLowerCase().startsWith(langPrefix));
            }
            
            return voice || ttsVoices[0];
        }

        function speakContent() {
            const t = translations[currentLang] || translations['pt-BR'];
            const contentElement = document.getElementById('devotionalContent');
            
            if (!synth || synth.speaking) {
                return;
            }

            // O conte√∫do a ser lido √© o texto dentro de devotionalContentDiv, exceto os t√≠tulos/vers√≠culos
            const textToSpeak = contentElement.innerText || contentElement.textContent;
            
            if (!textToSpeak) {
                alert(t.noContentAlert || "Conte√∫do para leitura n√£o encontrado.");
                return;
            }

            totalChars = textToSpeak.length;
            resetAudioProgressBar();

            utterance = new SpeechSynthesisUtterance(textToSpeak);
            utterance.lang = currentLang;

            const voice = getVoiceForLanguage(currentLang);
            if (voice) {
                utterance.voice = voice;
            } else {
                alert(t.ttsUnsupported + " " + t.noContentAlert);
                stopSpeaking();
                return;
            }

            utterance.onboundary = (event) => {
                const progress = (event.charIndex / totalChars) * 100;
                if (audioProgressBar) audioProgressBar.style.width = `${progress}%`;
            };

            utterance.onend = () => {
                resetAudioProgressBar(true);
                updateListenToggle('start');
            };

            synth.speak(utterance);
            updateListenToggle('speaking');
        }

        function stopSpeaking() {
            if (synth && synth.speaking) {
                synth.cancel();
            }
            if (synth) {
                synth.cancel();
            }
            resetAudioProgressBar(true);
            updateListenToggle('start');
        }

        function handleListenClick() {
            if (!synth || listenToggle.disabled) return;
            
            if (synth.speaking && !synth.paused) {
                // Pausar
                synth.pause();
                updateListenToggle('paused');
            } else if (synth.paused) {
                // Continuar
                synth.resume();
                updateListenToggle('speaking');
            } else if (!synth.speaking) {
                // Iniciar a leitura
                speakContent();
            }
        }

        // Fun√ß√£o para atualizar o estado e texto do bot√£o de √°udio
        function updateListenToggle(state) {
            const t = translations[currentLang] || translations['pt-BR'];
            
            listenToggle.disabled = false;
            listenToggle.classList.remove('speaking', 'paused', 'loading');

            if (!window.speechSynthesis) {
                listenToggle.innerHTML = t.ttsUnsupported;
                listenToggle.disabled = true;
                return;
            }

            if (state === 'speaking') {
                listenToggle.innerHTML = t.listenStop;
                listenToggle.classList.add('speaking');
            } else if (state === 'paused') {
                listenToggle.innerHTML = t.listenResume;
                listenToggle.classList.add('paused');
            } else if (state === 'loading') {
                listenToggle.innerHTML = t.ttsLoading;
                listenToggle.classList.add('loading');
                listenToggle.disabled = true;
            } else { // 'start'
                listenToggle.innerHTML = t.listenStart;
            }
        }
        
        // Inicializa√ß√£o das Vozes
        function populateVoiceList() {
            ttsVoices = synth.getVoices();
            if (ttsVoices.length > 0 && !ttsInitialized) {
                ttsInitialized = true;
                updateListenToggle('start');
            }
        }

        if (synth) {
            populateVoiceList();
            if (synth.onvoiceschanged !== undefined) {
                synth.onvoiceschanged = populateVoiceList;
            }
        } else {
            updateListenToggle('ttsUnsupported');
        }


        // --- FUN√á√ïES DE PROGRESSO ---
        function getCompletion(day) {
            return localStorage.getItem(`devotionalCompleted_${DEVOTIONAL_KEY}_${day}`) === 'true';
        }

        function saveCompletion(day, isCompleted) {
            if (isCompleted) {
                localStorage.setItem(`devotionalCompleted_${DEVOTIONAL_KEY}_${day}`, 'true');
            } else {
                localStorage.removeItem(`devotionalCompleted_${DEVOTIONAL_KEY}_${day}`);
            }
            updateOverallProgress();
        }

        function loadProgress() {
            let savedDay = parseInt(localStorage.getItem(`devotionalProgress_${DEVOTIONAL_KEY}`));
            if (isNaN(savedDay) || savedDay < 1 || savedDay > totalDays) {
                savedDay = 1;
            }
            currentDay = savedDay;
            updateFontSize(); 
            loadThemePreference(); 
            updateTexts(0);
        }

        function updateOverallProgress() {
            let completedDays = 0;
            for (let i = 1; i <= totalDays; i++) {
                if (getCompletion(i)) {
                    completedDays++;
                }
            }
            const overallProgress = (completedDays / totalDays) * 100;
            const overallProgressBar = document.getElementById('progressBar');
            if (overallProgressBar) {
                overallProgressBar.style.width = `${overallProgress.toFixed(0)}%`;
            }
            
            completedCheck.checked = getCompletion(currentDay);

            prevButton.disabled = currentDay <= 1;
            nextButton.disabled = currentDay >= totalDays;
        }

        // --- DADOS DO DEVOCIONAL (COMPLETO E CORRIGIDO) ---
        const devotionalContent = {
            1: {
                pt: {
                    h2: "A Falsa Promessa da Lei",
                    versiculos: "G√°latas 3:1-3 (NVI)",
                    resumo: "O ap√≥stolo Paulo confronta os g√°latas, que estavam voltando √†s pr√°ticas da Lei judaica ap√≥s experimentarem a liberdade em Cristo. Ele argumenta que a salva√ß√£o sempre foi pela f√©, citando Abra√£o. A Lei n√£o √© um meio de vida, mas sim um tutor que nos mostra nossa necessidade de Cristo.",
                    aplicacao: "Em que √°reas da minha vida tenho tentado 'merecer' o favor de Deus com meus esfor√ßos, em vez de descansar na obra completa de Cristo?",
                    oracao: "Senhor, perdoa-me por tentar conquistar aquilo que j√° me deste de gra√ßa. Ajuda-me a viver pela f√© em Teu Filho, crendo que sou aceito por Ele e n√£o pelos meus m√©ritos.",
                },
                en: {
                    h2: "The False Promise of the Law",
                    versiculos: "Galatians 3:1-3 (NIV)",
                    resumo: "The Apostle Paul confronts the Galatians, who were reverting to Jewish Law practices after experiencing freedom in Christ. He argues that salvation has always been by faith, citing Abraham. The Law is not a means to life, but a tutor that shows us our need for Christ.",
                    aplicacao: "In which areas of my life have I been trying to 'earn' God's favor with my efforts, instead of resting in the finished work of Christ?",
                    oracao: "Lord, forgive me for trying to earn what You have already given me freely. Help me to live by faith in Your Son, believing that I am accepted by Him and not by my merits.",
                },
                es: {
                    h2: "La Falsa Promesa de la Ley",
                    versiculos: "G√°latas 3:1-3 (NVI)",
                    resumo: "El ap√≥stol Pablo confronta a los g√°latas, que estaban volviendo a las pr√°cticas de la Ley jud√≠a despu√©s de haber experimentado la libertad en Cristo. √âl argumenta que la salvaci√≥n siempre ha sido por fe, citando a Abraham. La Ley no es un medio de vida, sino un tutor que nos muestra nuestra necesidad de Cristo.",
                    aplicacao: "¬øEn qu√© √°reas de mi vida he estado tratando de 'ganar' el favor de Dios con mis esfuerzos, en lugar de descansar en la obra completa de Cristo?",
                    oracao: "Se√±or, perd√≥name por intentar conquistar lo que ya me has dado gratuitamente. Ay√∫dame a vivir por fe en Tu Hijo, creyendo que soy aceptado por √âl y no por mis m√©ritos.",
                },
                fr: {
                    h2: "La Fausse Promesse de la Loi",
                    versiculos: "Galates 3:1-3 (LSG)",
                    resumo: "L'ap√¥tre Paul confronte les Galates, qui revenaient aux pratiques de la loi juive apr√®s avoir fait l'exp√©rience de la libert√© en Christ. Il soutient que le salut a toujours √©t√© par la foi, citant Abraham. La Loi n'est pas un moyen de vie, mais un tuteur qui nous montre notre besoin de Christ.",
                    aplicacao: "Dans quels domaines de ma vie ai-je essay√© de 'm√©riter' la faveur de Dieu par mes efforts, au lieu de me reposer sur l'≈ìuvre achev√©e du Christ?",
                    oracao: "Seigneur, pardonne-moi d'essayer de gagner ce que Tu m'as d√©j√† donn√© gratuitement. Aide-moi √† vivre par la foi en Ton Fils, croyant que je suis accept√© par Lui et non par mes m√©rites.",
                }
            },
            2: {
                pt: {
                    h2: "Identidade em Cristo: N√£o Mais Escravos",
                    versiculos: "G√°latas 4:4-7 (NVI)",
                    resumo: "Paulo explica a profundidade da obra de Cristo: Ele veio para nos resgatar da maldi√ß√£o da Lei, para que f√¥ssemos adotados como filhos. Pela f√©, recebemos o Esp√≠rito Santo, que clama 'Aba, Pai'. N√£o somos mais escravos, mas herdeiros de Deus.",
                    aplicacao: "Como a minha identidade de 'filho de Deus' deve influenciar a maneira como eu lido com o medo, a inseguran√ßa ou a opini√£o alheia hoje?",
                    oracao: "Pai, obrigado por me tirares da escravid√£o e me dares a identidade de filho(a). Ajuda-me a viver cada dia com a confian√ßa e a liberdade de um herdeiro Teu.",
                },
                en: {
                    h2: "Identity in Christ: No Longer Slaves",
                    versiculos: "Galatians 4:4-7 (NIV)",
                    resumo: "Paul explains the depth of Christ's work: He came to redeem us from the curse of the Law, so that we might be adopted as sons. By faith, we receive the Holy Spirit, who cries out 'Abba, Father'. We are no longer slaves, but heirs of God.",
                    aplicacao: "How should my identity as a 'child of God' influence the way I deal with fear, insecurity, or the opinions of others today?",
                    oracao: "Father, thank You for freeing me from slavery and giving me the identity of a son/daughter. Help me to live each day with the confidence and freedom of Your heir.",
                },
                es: {
                    h2: "Identidad en Cristo: Ya No M√°s Esclavos",
                    versiculos: "G√°latas 4:4-7 (NVI)",
                    resumo: "Pablo explica la profundidad de la obra de Cristo: √âl vino a rescatarnos de la maldici√≥n de la Ley, para que fu√©semos adoptados como hijos. Por la fe, recibimos el Esp√≠ritu Santo, que clama 'Abba, Padre'. Ya no somos esclavos, sino herederos de Dios.",
                    aplicacao: "¬øC√≥mo debe influir mi identidad de 'hijo de Dios' en la forma en que enfrento el miedo, la inseguridad o la opini√≥n de los dem√°s hoy?",
                    oracao: "Padre, gracias por sacarme de la esclavitud y darme la identidad de hijo(a). Ay√∫dame a vivir cada d√≠a con la confianza y la libertad de un heredero Tuyo.",
                },
                fr: {
                    h2: "Identit√© en Christ: Plus Esclaves",
                    versiculos: "Galates 4:4-7 (LSG)",
                    resumo: "Paul explique la profondeur de l'≈ìuvre du Christ: Il est venu nous racheter de la mal√©diction de la Loi, afin que nous soyons adopt√©s comme fils. Par la foi, nous recevons le Saint-Esprit, qui crie 'Abba, P√®re'. Nous ne sommes plus des esclaves, mais des h√©ritiers de Dieu.",
                    aplicacao: "Comment mon identit√© d'¬´enfant de Dieu¬ª devrait-elle influencer la mani√®re dont je g√®re la peur, l'ins√©curit√© ou l'opinion des autres aujourd'hui?",
                    oracao: "P√®re, merci de m'avoir lib√©r√© de l'esclavage et de m'avoir donn√© l'identit√© de fils/fille. Aide-moi √† vivre chaque jour avec la confiance et la libert√© d'un de Tes h√©ritiers.",
                }
            },
            3: {
                pt: {
                    h2: "A Liberdade N√£o √© uma Licen√ßa para o Pecado",
                    versiculos: "G√°latas 5:13-15 (NVI)",
                    resumo: "A liberdade em Cristo n√£o significa permiss√£o para viver em pecado, mas sim a oportunidade de servir uns aos outros em amor. A Lei se resume em amar o pr√≥ximo como a n√≥s mesmos. O ego√≠smo e a busca pela pr√≥pria satisfa√ß√£o s√£o incompat√≠veis com o Esp√≠rito.",
                    aplicacao: "De que maneira pr√°tica posso usar minha liberdade em Cristo hoje para servir e edificar algu√©m ao meu redor, em vez de satisfazer meus pr√≥prios desejos?",
                    oracao: "Deus, eu Te agrade√ßo pela liberdade que tenho em Cristo. Capacita-me a n√£o usar essa liberdade como desculpa para o pecado, mas como uma plataforma para Te amar e amar o meu pr√≥ximo de forma sacrificial.",
                },
                en: {
                    h2: "Freedom is Not a License for Sin",
                    versiculos: "Galatians 5:13-15 (NIV)",
                    resumo: "Freedom in Christ does not mean permission to live in sin, but rather the opportunity to serve one another in love. The Law is summarized in loving your neighbor as yourself. Selfishness and the pursuit of one's own satisfaction are incompatible with the Spirit.",
                    aplicacao: "In what practical way can I use my freedom in Christ today to serve and build up someone around me, instead of satisfying my own desires?",
                    oracao: "God, I thank You for the freedom I have in Christ. Empower me not to use that freedom as an excuse for sin, but as a platform to love You and love my neighbor sacrificially.",
                },
                es: {
                    h2: "La Libertad No Es una Licencia para el Pecado",
                    versiculos: "G√°latas 5:13-15 (NVI)",
                    resumo: "La libertad en Cristo no significa permiso para vivir en pecado, sino la oportunidad de servirnos unos a otros en amor. La Ley se resume en amar al pr√≥jimo como a uno mismo. El ego√≠smo y la b√∫squeda de la propia satisfacci√≥n son incompatibles con el Esp√≠ritu.",
                    aplicacao: "¬øDe qu√© manera pr√°ctica puedo usar mi libertad en Cristo hoy para servir y edificar a alguien a mi alrededor, en lugar de satisfacer mis propios deseos?",
                    oracao: "Dios, Te agradezco por la libertad que tengo en Cristo. Capac√≠tame para no usar esta libertad como excusa para el pecado, sino como una plataforma para amarte y amar a mi pr√≥jimo de forma sacrificial.",
                },
                fr: {
                    h2: "La Libert√© N'est Pas une Licence pour le P√©ch√©",
                    versiculos: "Galates 5:13-15 (LSG)",
                    resumo: "La libert√© en Christ ne signifie pas la permission de vivre dans le p√©ch√©, mais l'opportunit√© de nous servir les uns les autres par amour. La Loi se r√©sume √† aimer son prochain comme soi-m√™me. L'√©go√Øsme et la recherche de la propre satisfaction sont incompatibles avec l'Esprit.",
                    aplicacao: "De quelle mani√®re pratique puis-je utiliser ma libert√© en Christ aujourd'hui pour servir et √©difier quelqu'un autour de moi, au lieu de satisfaire mes propres d√©sirs?",
                    oracao: "Dieu, je Te remercie pour la libert√© que j'ai en Christ. Rends-moi capable de ne pas utiliser cette libert√© comme excuse pour le p√©ch√©, mais comme une plateforme pour T'aimer et aimer mon prochain de mani√®re sacrificielle.",
                }
            },
            4: {
                pt: {
                    h2: "Andando no Esp√≠rito e o Fruto",
                    versiculos: "G√°latas 5:22-26 (NVI)",
                    resumo: "O fruto do Esp√≠rito √© a evid√™ncia vis√≠vel da vida que anda em submiss√£o a Ele. O Fruto √© um conjunto de virtudes que refletem o car√°ter de Cristo. Se andamos no Esp√≠rito, n√£o satisfazemos os desejos da carne, pois o Esp√≠rito e a carne est√£o em conflito constante.",
                    aplicacao: "Qual parte do fruto do Esp√≠rito (amor, alegria, paz, paci√™ncia, etc.) eu preciso buscar mais intencionalmente hoje?",
                    oracao: "Esp√≠rito Santo, eu me submeto √† Tua dire√ß√£o. Pe√ßo que Tu produzas em mim o Teu fruto, para que o meu car√°ter se torne mais parecido com o de Cristo e eu glorifique a Deus em tudo.",
                },
                en: {
                    h2: "Walking in the Spirit and the Fruit",
                    versiculos: "Galatians 5:22-26 (NIV)",
                    resumo: "The fruit of the Spirit is the visible evidence of the life that walks in submission to Him. The Fruit is a set of virtues that reflect the character of Christ. If we walk in the Spirit, we do not satisfy the desires of the flesh, for the Spirit and the flesh are in constant conflict.",
                    aplicacao: "Which part of the fruit of the Spirit (love, joy, peace, patience, etc.) do I need to seek more intentionally today?",
                    oracao: "Holy Spirit, I submit to Your direction. I ask You to produce Your fruit in me, so that my character becomes more like Christ's and I may glorify God in everything.",
                },
                es: {
                    h2: "Caminando en el Esp√≠ritu y el Fruto",
                    versiculos: "G√°latas 5:22-26 (NVI)",
                    resumo: "El fruto del Esp√≠ritu es la evidencia visible de la vida que camina en sumisi√≥n a √âl. El Fruto es un conjunto de virtudes que reflejan el car√°cter de Cristo. Si caminamos en el Esp√≠ritu, no satisfacemos los deseos de la carne, pues el Esp√≠ritu y la carne est√°n en conflicto constante.",
                    aplicacao: "¬øQu√© parte del fruto del Esp√≠ritu (amor, alegr√≠a, paz, paciencia, etc.) necesito buscar m√°s intencionalmente hoy?",
                    oracao: "Esp√≠ritu Santo, me someto a Tu direcci√≥n. Te pido que produzcas Tu fruto en m√≠, para que mi car√°cter se parezca m√°s al de Cristo y yo glorifique a Dios en todo.",
                },
                fr: {
                    h2: "Marcher selon l'Esprit et le Fruit",
                    versiculos: "Galates 5:22-26 (LSG)",
                    resumo: "Le fruit de l'Esprit est la preuve visible de la vie qui marche dans la soumission √† Lui. Le Fruit est un ensemble de vertus qui refl√®tent le caract√®re de Christ. Si nous marchons selon l'Esprit, nous ne satisfaisons pas les d√©sirs de la chair, car l'Esprit et la chair sont en conflit constant.",
                    aplicacao: "Quelle partie du fruit de l'Esprit (amour, joie, paix, patience, etc.) ai-je besoin de rechercher plus intentionnellement aujourd'hui?",
                    oracao: "Saint-Esprit, je me soumets √† Ta direction. Je Te demande de produire Ton fruit en moi, afin que mon caract√®re ressemble davantage √† celui de Christ et que je glorifie Dieu en tout.",
                }
            },
            5: {
                pt: {
                    h2: "O Princ√≠pio da Semeadura e Colheita",
                    versiculos: "G√°latas 6:7-10 (NVI)",
                    resumo: "Nossa vida √© regida por um princ√≠pio espiritual: aquilo que semearmos, colheremos. Se semearmos para a carne, colheremos corrup√ß√£o; se semearmos para o Esp√≠rito, colheremos vida eterna. Somos exortados a fazer o bem a todos, especialmente aos da fam√≠lia da f√©.",
                    aplicacao: "Onde meus investimentos de tempo, energia e recursos est√£o sendo direcionados? Estou semeando mais para a carne ou para o Esp√≠rito?",
                    oracao: "Senhor, ajuda-me a ser s√°bio nas minhas escolhas di√°rias, investindo naquilo que √© eterno. Que eu n√£o desista de fazer o bem, mas que colha a vida que vem de Ti.",
                },
                en: {
                    h2: "The Principle of Sowing and Reaping",
                    versiculos: "Galatians 6:7-10 (NIV)",
                    resumo: "Our lives are governed by a spiritual principle: whatever we sow, we will reap. If we sow to the flesh, we will reap corruption; if we sow to the Spirit, we will reap eternal life. We are exhorted to do good to all people, especially to those who belong to the family of faith.",
                    aplicacao: "Where are my investments of time, energy, and resources being directed? Am I sowing more to the flesh or to the Spirit?",
                    oracao: "Lord, help me to be wise in my daily choices, investing in what is eternal. May I not give up on doing good, but reap the life that comes from You.",
                },
                es: {
                    h2: "El Principio de la Siembra y la Cosecha",
                    versiculos: "G√°latas 6:7-10 (NVI)",
                    resumo: "Nuestra vida se rige por un principio espiritual: aquello que sembremos, cosecharemos. Si sembramos para la carne, cosecharemos corrupci√≥n; si sembramos para el Esp√≠ritu, cosecharemos vida eterna. Se nos exhorta a hacer el bien a todos, especialmente a los de la familia de la fe.",
                    aplicacao: "¬øHacia d√≥nde se dirigen mis inversiones de tiempo, energ√≠a y recursos? ¬øEstoy sembrando m√°s para la carne o para el Esp√≠ritu?",
                    oracao: "Se√±or, ay√∫dame a ser sabio en mis elecciones diarias, invirtiendo en lo que es eterno. Que no me canse de hacer el bien, sino que coseche la vida que viene de Ti.",
                },
                fr: {
                    h2: "Le Principe des Semences et de la R√©colte",
                    versiculos: "Galates 6:7-10 (LSG)",
                    resumo: "Notre vie est r√©gie par un principe spirituel: ce que nous semons, nous le r√©colterons. Si nous semons pour la chair, nous r√©colterons la corruption; si nous semons pour l'Esprit, nous r√©colterons la vie √©ternelle. Nous sommes exhort√©s √† faire le bien √† tous, et surtout aux membres de la famille de la foi.",
                    aplicacao: "O√π mes investissements de temps, d'√©nergie et de ressources sont-ils dirig√©s? Est-ce que je s√®me plus pour la chair ou pour l'Esprit?",
                    oracao: "Seigneur, aide-moi √† √™tre sage dans mes choix quotidiens, en investissant dans ce qui est √©ternel. Que je ne me lasse pas de faire le bien, mais que je r√©colte la vie qui vient de Toi.",
                }
            },
            6: {
                pt: {
                    h2: "O Fardo uns dos Outros",
                    versiculos: "G√°latas 6:2 (NVI)",
                    resumo: "Somos chamados a carregar os fardos uns dos outros, cumprindo assim a lei de Cristo. Isso implica em compaix√£o e ajuda pr√°tica aos que est√£o sofrendo ou fracos. O ego√≠smo nos impede de viver a verdadeira comunh√£o do Corpo.",
                    aplicacao: "Quem est√° passando por um fardo hoje que eu posso ajudar a carregar? O que posso fazer para demonstrar o amor de Cristo a essa pessoa?",
                    oracao: "Deus, abre meus olhos para as necessidades dos meus irm√£os e irm√£s. D√°-me um cora√ß√£o compassivo e a disposi√ß√£o de carregar o fardo dos outros, cumprindo a lei do amor de Cristo.",
                },
                en: {
                    h2: "Bearing One Another's Burdens",
                    versiculos: "Galatians 6:2 (NIV)",
                    resumo: "We are called to bear one another's burdens, and in this way, fulfill the law of Christ. This implies compassion and practical help for those who are suffering or weak. Selfishness prevents us from living the true fellowship of the Body.",
                    aplicacao: "Who is carrying a burden today that I can help bear? What can I do to demonstrate the love of Christ to that person?",
                    oracao: "God, open my eyes to the needs of my brothers and sisters. Give me a compassionate heart and the willingness to bear the burdens of others, fulfilling the law of Christ's love.",
                },
                es: {
                    h2: "La Carga Mutua",
                    versiculos: "G√°latas 6:2 (NVI)",
                    resumo: "Estamos llamados a llevar las cargas unos de otros, cumpliendo as√≠ la ley de Cristo. Esto implica compasi√≥n y ayuda pr√°ctica a quienes est√°n sufriendo o d√©biles. El ego√≠smo nos impide vivir la verdadera comuni√≥n del Cuerpo.",
                    aplicacao: "¬øQui√©n est√° pasando por una carga hoy que yo pueda ayudar a llevar? ¬øQu√© puedo hacer para demostrar el amor de Cristo a esa persona?",
                    oracao: "Dios, abre mis ojos a las necesidades de mis hermanos y hermanas. Dame un coraz√≥n compasivo y la disposici√≥n de llevar la carga de los dem√°s, cumpliendo la ley del amor de Cristo.",
                },
                fr: {
                    h2: "Le Fardeau les Uns des Autres",
                    versiculos: "Galates 6:2 (LSG)",
                    resumo: "Nous sommes appel√©s √† porter les fardeaux les uns des autres, accomplissant ainsi la loi de Christ. Cela implique la compassion et l'aide pratique √† ceux qui souffrent ou sont faibles. L'√©go√Øsme nous emp√™che de vivre la v√©ritable communion du Corps.",
                    aplicacao: "Qui porte un fardeau aujourd'hui que je peux aider √† porter? Que puis-je faire pour d√©montrer l'amour de Christ √† cette personne?",
                    oracao: "Dieu, ouvre mes yeux aux besoins de mes fr√®res et s≈ìurs. Donne-moi un c≈ìur compatissant et la volont√© de porter le fardeau des autres, accomplissant la loi de l'amour de Christ.",
                }
            },
            7: {
                pt: {
                    h2: "A Gl√≥ria Somente na Cruz",
                    versiculos: "G√°latas 6:14 (NVI)",
                    resumo: "O alvo final de Paulo √© glorificar-se apenas na cruz de Cristo, pois √© nela que o mundo est√° crucificado para n√≥s, e n√≥s para o mundo. O foco n√£o est√° em regras ou rituais externos, mas na transforma√ß√£o radical que vem da obra redentora de Jesus.",
                    aplicacao: "Quais 'gl√≥rias' terrenas (status, sucesso, riquezas) ainda competem com a gl√≥ria da cruz na minha vida? O que preciso 'crucificar' hoje para focar em Cristo?",
                    oracao: "Pai, que eu jamais me glorie, a n√£o ser na cruz de nosso Senhor Jesus Cristo. Que o poder da Tua cruz me liberte do apego a este mundo e me fa√ßa viver completamente para Ti.",
                },
                en: {
                    h2: "Glory Only in the Cross",
                    versiculos: "Galatians 6:14 (NIV)",
                    resumo: "Paul's final goal is to boast only in the cross of Christ, for through it the world has been crucified to us, and we to the world. The focus is not on external rules or rituals, but on the radical transformation that comes from the redeeming work of Jesus.",
                    aplicacao: "What earthly 'glories' (status, success, wealth) still compete with the glory of the cross in my life? What do I need to 'crucify' today to focus on Christ?",
                    oracao: "Father, may I never boast except in the cross of our Lord Jesus Christ. May the power of Your cross free me from attachment to this world and make me live completely for You.",
                },
                es: {
                    h2: "La Gloria Solamente en la Cruz",
                    versiculos: "G√°latas 6:14 (NVI)",
                    resumo: "El objetivo final de Pablo es gloriarse solo en la cruz de Cristo, ya que en ella el mundo est√° crucificado para nosotros, y nosotros para el mundo. El enfoque no est√° en reglas o rituales externos, sino en la transformaci√≥n radical que proviene de la obra redentora de Jes√∫s.",
                    aplicacao: "¬øQu√© 'glorias' terrenales (estatus, √©xito, riquezas) a√∫n compiten con la gloria de la cruz en mi vida? ¬øQu√© necesito 'crucificar' hoy para enfocarme en Cristo?",
                    oracao: "Padre, que yo jam√°s me glor√≠e, sino en la cruz de nuestro Se√±or Jesucristo. Que el poder de Tu cruz me libere del apego a este mundo y me haga vivir completamente para Ti.",
                },
                fr: {
                    h2: "La Gloire Uniquement dans la Croix",
                    versiculos: "Galates 6:14 (LSG)",
                    resumo: "Le but final de Paul est de se glorifier uniquement dans la croix de Christ, car c'est en elle que le monde est crucifi√© pour nous, et nous pour le monde. L'accent n'est pas mis sur des r√®gles ou des rituels externes, mais sur la transformation radicale qui vient de l'≈ìuvre r√©demptrice de J√©sus.",
                    aplicacao: "Quelles 'gloires' terrestres (statut, succ√®s, richesses) sont encore en concurrence avec la gloire de la croix dans ma vie? Que dois-je 'crucifier' aujourd'hui pour me concentrer sur Christ?",
                    oracao: "P√®re, que je ne me glorifie jamais, si ce n'est dans la croix de notre Seigneur J√©sus-Christ. Que la puissance de Ta croix me lib√®re de l'attachement √† ce monde et me fasse vivre enti√®rement pour Toi.",
                }
            }
        };

        // --- INICIALIZA√á√ÉO DO APP ---
        window.onload = () => {
            // Inicializa e carrega o estado da p√°gina
            loadProgress();
            
            // Event Listeners (Restaurados)
            themeToggle.addEventListener('click', toggleDarkMode);
            listenToggle.addEventListener('click', handleListenClick);

            // Listener para dropdown de idiomas
            langSelectButton.addEventListener('click', (event) => {
                event.stopPropagation();
                const isExpanded = langDropdown.style.display === 'block';
                langDropdown.style.display = isExpanded ? 'none' : 'block';
                langSelectButton.setAttribute('aria-expanded', !isExpanded); 
            });

            // Listener para fechar dropdown ao clicar fora
            document.addEventListener('click', (event) => {
                const wrapper = document.querySelector('.language-selector-wrapper');
                // Adiciona o themeToggle tamb√©m como elemento a ser ignorado
                if (langDropdown.style.display === 'block' && !wrapper.contains(event.target) && event.target !== themeToggle) {
                    langDropdown.style.display = 'none';
                    langSelectButton.setAttribute('aria-expanded', 'false'); 
                }
            });

            // Listener para bot√µes de idioma
            document.querySelectorAll('.lang-dropdown button').forEach(button => {
                button.addEventListener('click', () => {
                    setLanguage(button.getAttribute('data-lang'));
                });
            });

            prevButton.addEventListener('click', prevDay);
            nextButton.addEventListener('click', nextDay);
            completedCheck.addEventListener('change', handleCompletedCheck);
            
            // Listeners para o controle de fonte
            document.getElementById('fontSizeIncrease').addEventListener('click', increaseFontSize);
            document.getElementById('fontSizeDecrease').addEventListener('click', decreaseFontSize);
        };
        
    </script>
    
    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>
        new window.VLibras.Widget('https://vlibras.gov.br/app');
    </script>
</body>
</html>